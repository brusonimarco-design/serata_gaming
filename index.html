<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Serata Gaming</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#1a1a1a;
  color:#f0f0f0;
  text-align:center;
  margin:0;
}
h1 {
  background:#282828;
  margin:0;
  padding:25px;
}
.container {
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:20px;
  padding:40px;
}
.gamer-card {
  background:#333;
  width:250px;
  border-radius:15px;
  padding:20px;
  box-shadow:0 4px 10px rgba(0,0,0,.5);
  transition:.3s;
}
.gamer-card.voted-yes {
  border:3px solid #28a745;
  box-shadow:0 0 15px #28a745;
}
.gamer-card.voted-no {
  border:3px solid #dc3545;
  box-shadow:0 0 15px #dc3545;
}
.gamer-photo {
  width:140px;
  height:140px;
  border-radius:50%;
  border:3px solid #ffd700;
  object-fit:cover;
}
h2 { color:#ffd700; }
.button-group {
  display:flex;
  gap:10px;
  justify-content:center;
  margin-top:15px;
}
button {
  border:none;
  border-radius:8px;
  padding:10px;
  cursor:pointer;
  font-size:.8em;
}
.yes { background:#28a745; color:white; }
.no  { background:#dc3545; color:white; }
button:disabled {
  opacity:.5;
  cursor:not-allowed;
}
#vote-totals {
  font-size:1.4em;
  margin-bottom:40px;
}
#reset-button {
  margin-top:20px;
  padding:10px 20px;
  font-size:1em;
  border-radius:8px;
  cursor:pointer;
  background:#ffc107;
  color:#1a1a1a;
  border:none;
}
</style>
</head>

<body>

<script>
// PASSWORD DI ACCESSO AL SITO
const SITE_PASSWORDS = ["cheeselamerda"]; // cambia con le tue password
if (!sessionStorage.getItem("authenticated")) {
  const pwd = prompt("Inserisci la password per accedere al sito");
  if (SITE_PASSWORDS.includes(pwd)) {
    sessionStorage.setItem("authenticated","yes");
  } else {
    alert("Password errata! Non puoi accedere.");
    document.body.innerHTML="<h1>Accesso negato</h1>";
  }
}
</script>

<h1>üéÆ SERATA GAMING üéÆ</h1>
<p style="font-size:2em">Ultimo weekend di Febbraio</p>

<div class="container">

  <div class="gamer-card" data-name="STEVEN">
    <h2>STEVEN</h2>
    <img src="ste.png" class="gamer-photo">
    <div class="button-group">
      <button class="yes" onclick="vote('STEVEN','SI')">‚úÖ Ci sono</button>
      <button class="no" onclick="vote('STEVEN','NO')">‚ùå Non ci sono</button>
    </div>
  </div>

  <div class="gamer-card" data-name="ED-O">
    <h2>ED-O</h2>
    <img src="edo.png" class="gamer-photo">
    <div class="button-group">
      <button class="yes" onclick="vote('ED-O','SI')">‚úÖ Ci sono</button>
      <button class="no" onclick="vote('ED-O','NO')">‚ùå Non ci sono</button>
    </div>
  </div>

  <div class="gamer-card" data-name="CONRAD">
    <h2>CONRAD</h2>
    <img src="corrad.png" class="gamer-photo">
    <div class="button-group">
      <button class="yes" onclick="vote('CONRAD','SI')">‚úÖ Ci sono</button>
      <button class="no" onclick="vote('CONRAD','NO')">‚ùå Non ci sono</button>
    </div>
  </div>

  <div class="gamer-card" data-name="MARK">
    <h2>MARK</h2>
    <img src="marco.png" class="gamer-photo">
    <div class="button-group">
      <button class="yes" onclick="vote('MARK','SI')">‚úÖ Ci sono</button>
      <button class="no" onclick="vote('MARK','NO')">‚ùå Non ci sono</button>
    </div>
  </div>

</div>

<div id="vote-totals">‚úÖ Si: 0 | ‚ùå No: 0</div>

<!-- Tasto Reset -->
<button id="reset-button">üßπ Reset voti</button>

<!-- Musica (verr√† avviata dopo il primo click) -->
<audio id="bg-music" loop>
  <source src="musica.mp3" type="audio/mpeg">
  Il tuo browser non supporta l'audio.
</audio>

<script>
// CONFIG
const EVENT_ID = "gaming_ultimo_we_febbraio";
const passwords = {
  "STEVEN":"pass123",
  "ED-O":"edo456",
  "CONRAD":"corrad789",
  "MARK":"mark321"
};
const voteLinks = {
  "STEVEN": { SI:"#", NO:"#"},
  "ED-O": { SI:"#", NO:"#"},
  "CONRAD": { SI:"#", NO:"#"},
  "MARK": { SI:"#", NO:"#"}
};

// FUNZIONI
function updateTotals() {
  let yes=0,no=0;
  document.querySelectorAll(".gamer-card").forEach(card=>{
    if(card.classList.contains("voted-yes")) yes++;
    if(card.classList.contains("voted-no")) no++;
  });
  document.getElementById("vote-totals").innerText=`‚úÖ Si: ${yes} | ‚ùå No: ${no}`;
}

function vote(name,choice){
  if(localStorage.getItem(EVENT_ID+"_voted_"+name)){
    alert("Hai gi√† votato!");
    return;
  }
  const pwd = prompt(`Password di ${name}`);
  if(pwd!==passwords[name]){
    alert("Password errata");
    return;
  }
  localStorage.setItem(EVENT_ID+"_voted_"+name,choice);
  const card=document.querySelector(`.gamer-card[data-name="${name}"]`);
  card.classList.add(choice==="SI"?"voted-yes":"voted-no");
  card.querySelectorAll("button").forEach(b=>b.disabled=true);
  updateTotals();
}

// CARICA VOTI LOCALSTORAGE
function loadLocalVotes(){
  document.querySelectorAll(".gamer-card").forEach(card=>{
    const name=card.dataset.name;
    const choice=localStorage.getItem(EVENT_ID+"_voted_"+name);
    if(choice){
      card.classList.add(choice==="SI"?"voted-yes":"voted-no");
      card.querySelectorAll("button").forEach(b=>b.disabled=true);
    }
  });
  updateTotals();
}

// RESET VOTI
document.getElementById("reset-button").addEventListener("click",function(){
  const pwd=prompt("Password per resettare i voti");
  if(pwd==="reset123"){ // cambia con la tua password
    Object.keys(localStorage).forEach(key=>{
      if(key.startsWith(EVENT_ID+"_voted_")) localStorage.removeItem(key);
    });
    document.querySelectorAll(".gamer-card").forEach(card=>{
      card.classList.remove("voted-yes","voted-no");
      card.querySelectorAll("button").forEach(b=>b.disabled=false);
    });
    updateTotals();
    alert("Voti resettati!");
  }else alert("Password errata!");
});

// AVVIA MUSICA DOPO IL PRIMO CLICK
let musicStarted = false;
document.body.addEventListener("click", function(){
  if(!musicStarted){
    document.getElementById("bg-music").play().catch(()=>{});
    musicStarted=true;
  }
}, {once:true});

loadLocalVotes();
</script>

</body>
</html>
